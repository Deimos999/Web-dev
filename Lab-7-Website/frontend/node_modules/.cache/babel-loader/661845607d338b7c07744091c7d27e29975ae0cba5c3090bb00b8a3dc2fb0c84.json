{"ast":null,"code":"var _jsxFileName = \"/home/irakli/Desktop/CS/Web/Lab-7-Website/frontend/src/pages/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile({\n  user,\n  onUserChange\n}) {\n  _s();\n  const [profile, setProfile] = useState(null);\n  const [editing, setEditing] = useState({\n    username: '',\n    email: '',\n    password: ''\n  });\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    fetch('http://localhost:1234/api/user/profile', {\n      credentials: 'include'\n    }).then(r => r.json()).then(d => {\n      var _d$user, _d$user2;\n      setProfile(d.user);\n      setEditing({\n        username: ((_d$user = d.user) === null || _d$user === void 0 ? void 0 : _d$user.username) || '',\n        email: ((_d$user2 = d.user) === null || _d$user2 === void 0 ? void 0 : _d$user2.email) || '',\n        password: ''\n      });\n    });\n  }, []);\n  const update = async () => {\n    setMessage('');\n    const res = await fetch('http://localhost:1234/api/user/profile', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      body: JSON.stringify(editing)\n    });\n    const d = await res.json();\n    if (res.ok) {\n      setMessage('Saved');\n      onUserChange(prev => ({\n        ...prev,\n        username: editing.username\n      }));\n    } else {\n      setMessage(d.error || 'Error');\n    }\n    setTimeout(() => setMessage(''), 3000);\n  };\n  const remove = async () => {\n    if (!confirm('Delete your account? This is permanent.')) return;\n    const res = await fetch('http://localhost:1234/api/user/profile', {\n      method: 'DELETE',\n      credentials: 'include'\n    });\n    if (res.ok) {\n      // reload page to show logged out state\n      window.location.reload();\n    } else {\n      alert('Could not delete');\n    }\n  };\n  if (!profile) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 24\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Username\", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: editing.username,\n        onChange: e => setEditing({\n          ...editing,\n          username: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Email\", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: editing.email,\n        onChange: e => setEditing({\n          ...editing,\n          email: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"New password (leave blank to keep)\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: editing.password,\n        onChange: e => setEditing({\n          ...editing,\n          password: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: update,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn danger\",\n        onClick: remove,\n        children: \"Delete account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"CiQjktr4zsRKXtTkugZ+vbEa+J4=\");\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Profile","user","onUserChange","_s","profile","setProfile","editing","setEditing","username","email","password","message","setMessage","fetch","credentials","then","r","json","d","_d$user","_d$user2","update","res","method","headers","body","JSON","stringify","ok","prev","error","setTimeout","remove","confirm","window","location","reload","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","type","onClick","_c","$RefreshReg$"],"sources":["/home/irakli/Desktop/CS/Web/Lab-7-Website/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nexport default function Profile({ user, onUserChange }){\n  const [profile, setProfile] = useState(null);\n  const [editing, setEditing] = useState({ username: '', email: '', password: '' });\n  const [message, setMessage] = useState('');\n\n  useEffect(()=>{\n    fetch('http://localhost:1234/api/user/profile', { credentials:'include' })\n      .then(r=>r.json())\n      .then(d => {\n        setProfile(d.user);\n        setEditing({ username: d.user?.username || '', email: d.user?.email || '', password: '' });\n      });\n  }, []);\n\n  const update = async () => {\n    setMessage('');\n    const res = await fetch('http://localhost:1234/api/user/profile', {\n      method:'PUT',\n      headers:{'Content-Type':'application/json'},\n      credentials:'include',\n      body: JSON.stringify(editing)\n    });\n    const d = await res.json();\n    if (res.ok) {\n      setMessage('Saved');\n      onUserChange(prev => ({ ...prev, username: editing.username }));\n    } else {\n      setMessage(d.error || 'Error');\n    }\n    setTimeout(()=>setMessage(''), 3000);\n  };\n\n  const remove = async () => {\n    if (!confirm('Delete your account? This is permanent.')) return;\n    const res = await fetch('http://localhost:1234/api/user/profile', { method:'DELETE', credentials:'include' });\n    if (res.ok) {\n      // reload page to show logged out state\n      window.location.reload();\n    } else {\n      alert('Could not delete');\n    }\n  };\n\n  if (!profile) return <div className=\"card\">Loading...</div>;\n\n  return (\n    <div className=\"card\">\n      <h2>Your Profile</h2>\n      <label>Username\n        <input value={editing.username} onChange={e=>setEditing({...editing, username:e.target.value})}/>\n      </label>\n      <label>Email\n        <input value={editing.email} onChange={e=>setEditing({...editing, email:e.target.value})}/>\n      </label>\n      <label>New password (leave blank to keep)\n        <input type=\"password\" value={editing.password} onChange={e=>setEditing({...editing, password:e.target.value})}/>\n      </label>\n      <div className=\"actions\">\n        <button className=\"btn\" onClick={update}>Save</button>\n        <button className=\"btn danger\" onClick={remove}>Delete account</button>\n      </div>\n      {message && <div className=\"info\">{message}</div>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}